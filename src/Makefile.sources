# vim:ts=4

######## /xefis/application ########

SRC_HEADERS += xefis/application/application.h
SRC_HEADERS += xefis/application/fail.h
SRC_HEADERS += xefis/application/services.h
SRC_HEADERS += xefis/application/xefis.h

SRC_SOURCES += xefis/application/application.cc
SRC_SOURCES += xefis/application/fail.cc
SRC_SOURCES += xefis/application/main.cc
SRC_SOURCES += xefis/application/services.cc

SRC_MOCHDRS += xefis/application/application.h
SRC_MOCHDRS += xefis/application/services.h

######## /xefis/components ########

SRC_HEADERS += xefis/components/property_editor/property_editor.h
SRC_HEADERS += xefis/components/property_editor/property_tree_widget.h
SRC_HEADERS += xefis/components/property_editor/property_tree_widget_item.h
SRC_HEADERS += xefis/components/configurator/configurator_widget.h

SRC_SOURCES += xefis/components/property_editor/property_editor.cc
SRC_SOURCES += xefis/components/property_editor/property_tree_widget.cc
SRC_SOURCES += xefis/components/property_editor/property_tree_widget_item.cc
SRC_SOURCES += xefis/components/configurator/configurator_widget.cc

SRC_MOCHDRS += xefis/components/property_editor/property_editor.h
SRC_MOCHDRS += xefis/components/property_editor/property_tree_widget.h
SRC_MOCHDRS += xefis/components/configurator/configurator_widget.h

######## /xefis/config ########

SRC_HEADERS += xefis/config/all.h
SRC_HEADERS += xefis/config/constants.h
SRC_HEADERS += xefis/config/resources.h
SRC_HEADERS += xefis/config/system.h
SRC_HEADERS += xefis/config/types.h

NODEP_SOURCES += $(VERSION_FILE)

######## /xefis/core ########

SRC_HEADERS += xefis/core/config_reader.h
SRC_HEADERS += xefis/core/input.h
SRC_HEADERS += xefis/core/instrument.h
SRC_HEADERS += xefis/core/instrument_aids.h
SRC_HEADERS += xefis/core/instrument_widget.h
SRC_HEADERS += xefis/core/module.h
SRC_HEADERS += xefis/core/module_manager.h
SRC_HEADERS += xefis/core/navaid.h
SRC_HEADERS += xefis/core/navaid_storage.h
SRC_HEADERS += xefis/core/property.h
SRC_HEADERS += xefis/core/property_node.h
SRC_HEADERS += xefis/core/property_storage.h
SRC_HEADERS += xefis/core/window.h
SRC_HEADERS += xefis/core/work_performer.h

SRC_SOURCES += xefis/core/config_reader.cc
SRC_SOURCES += xefis/core/instrument_aids.cc
SRC_SOURCES += xefis/core/instrument_widget.cc
SRC_SOURCES += xefis/core/module.cc
SRC_SOURCES += xefis/core/module_manager.cc
SRC_SOURCES += xefis/core/navaid.cc
SRC_SOURCES += xefis/core/navaid_storage.cc
SRC_SOURCES += xefis/core/property_node.cc
SRC_SOURCES += xefis/core/property_storage.cc
SRC_SOURCES += xefis/core/window.cc
SRC_SOURCES += xefis/core/work_performer.cc

SRC_MOCHDRS += xefis/core/window.h

######## /xefis/utility ########

SRC_HEADERS += xefis/utility/backtrace.h
SRC_HEADERS += xefis/utility/density_altitude.h
SRC_HEADERS += xefis/utility/magnetic_variation.h
SRC_HEADERS += xefis/utility/mutex.h
SRC_HEADERS += xefis/utility/navigation.h
SRC_HEADERS += xefis/utility/noncopyable.h
SRC_HEADERS += xefis/utility/numeric.h
SRC_HEADERS += xefis/utility/pid.h
SRC_HEADERS += xefis/utility/qdom.h
SRC_HEADERS += xefis/utility/painter.h
SRC_HEADERS += xefis/utility/range.h
SRC_HEADERS += xefis/utility/semaphore.h
SRC_HEADERS += xefis/utility/smoother.h
SRC_HEADERS += xefis/utility/sound_speed.h
SRC_HEADERS += xefis/utility/text_painter.h
SRC_HEADERS += xefis/utility/thread.h
SRC_HEADERS += xefis/utility/wind_triangle.h

SRC_SOURCES += xefis/utility/backtrace.cc
SRC_SOURCES += xefis/utility/magnetic_variation.cc
SRC_SOURCES += xefis/utility/mutex.cc
SRC_SOURCES += xefis/utility/painter.cc
SRC_SOURCES += xefis/utility/semaphore.cc
SRC_SOURCES += xefis/utility/text_painter.cc
SRC_SOURCES += xefis/utility/thread.cc

######## /lib/si ########

SRC_HEADERS += lib/si/all.h
SRC_HEADERS += lib/si/angle.h
SRC_HEADERS += lib/si/constants.h
SRC_HEADERS += lib/si/frequency.h
SRC_HEADERS += lib/si/length.h
SRC_HEADERS += lib/si/lonlat.h
SRC_HEADERS += lib/si/operators.h
SRC_HEADERS += lib/si/pressure.h
SRC_HEADERS += lib/si/speed.h
SRC_HEADERS += lib/si/time.h
SRC_HEADERS += lib/si/value.h

SRC_SOURCES += lib/si/angle.cc
SRC_SOURCES += lib/si/frequency.cc
SRC_SOURCES += lib/si/length.cc
SRC_SOURCES += lib/si/lonlat.cc
SRC_SOURCES += lib/si/pressure.cc
SRC_SOURCES += lib/si/speed.cc
SRC_SOURCES += lib/si/time.cc

######## /modules/generic ########

SRC_HEADERS += modules/generic/fps.h

SRC_SOURCES += modules/generic/fps.cc

######## /modules/instruments ########

SRC_HEADERS += modules/instruments/efis.h
SRC_HEADERS += modules/instruments/efis_widget.h
SRC_HEADERS += modules/instruments/hsi.h
SRC_HEADERS += modules/instruments/hsi_widget.h
SRC_HEADERS += modules/instruments/radial_indicator.h
SRC_HEADERS += modules/instruments/radial_indicator_widget.h

SRC_SOURCES += modules/instruments/efis.cc
SRC_SOURCES += modules/instruments/efis_widget.cc
SRC_SOURCES += modules/instruments/hsi.cc
SRC_SOURCES += modules/instruments/hsi_widget.cc
SRC_SOURCES += modules/instruments/radial_indicator.cc
SRC_SOURCES += modules/instruments/radial_indicator_widget.cc

SRC_MOCHDRS += modules/instruments/efis.h
SRC_MOCHDRS += modules/instruments/efis_widget.h
SRC_MOCHDRS += modules/instruments/hsi.h
SRC_MOCHDRS += modules/instruments/radial_indicator.h

######## /modules/io ########

SRC_HEADERS += modules/io/flight_gear.h
SRC_HEADERS += modules/io/joystick.h

SRC_SOURCES += modules/io/flight_gear.cc
SRC_SOURCES += modules/io/joystick.cc

SRC_MOCHDRS += modules/io/flight_gear.h
SRC_MOCHDRS += modules/io/joystick.h

######## /modules/systems ########

SRC_HEADERS += modules/systems/flight_director.h
SRC_HEADERS += modules/systems/fly_by_wire.h
SRC_HEADERS += modules/systems/fdc.h
SRC_HEADERS += modules/systems/lookahead.h
SRC_HEADERS += modules/systems/mouse.h
SRC_HEADERS += modules/systems/rcms.h

SRC_SOURCES += modules/systems/flight_director.cc
SRC_SOURCES += modules/systems/fly_by_wire.cc
SRC_SOURCES += modules/systems/fdc.cc
SRC_SOURCES += modules/systems/lookahead.cc
SRC_SOURCES += modules/systems/mouse.cc
SRC_SOURCES += modules/systems/rcms.cc

SRC_MOCHDRS += modules/systems/mouse.h

######## /modules/private ########

SRC_HEADERS += modules/private/state.h

SRC_SOURCES += modules/private/state.cc

################

VERSION_FILE := xefis/config/version.cc
HEADERS += $(SRC_HEADERS)
SOURCES += $(SRC_SOURCES)
MOCSRCS += $(call mkmocs, $(foreach file, $(SRC_MOCHDRS), $(file)))
OBJECTS += $(call mkobjs, $(SOURCES))
OBJECTS += $(call mkobjs, $(NODEP_SOURCES))
MOCOBJS += $(call mkmocobjs, $(MOCSRCS))
TARGETS += $(distdir)/xefis
LINKEDS += $(distdir)/xefis

$(distdir)/xefis: $(OBJECTS) $(MOCOBJS)

