<?xml version='1.0'?>
<xefis-include>
	<module name='io/link' instance='output'>
		<settings>
			<setting name='frequency' value='20 Hz'/>
		</settings>
		<properties>
			<property name='output' path='/link/data/to-groundstation'/>
		</properties>
		<protocol>
			<packet magic='ca:fe'>
				<signature random-bytes='1' signature-bytes='2' key='00:11:22:33'>
					<property type='angle' bytes='2' path='/sensors/ahrs/orientation/pitch'/>
					<property type='angle' bytes='2' path='/sensors/ahrs/orientation/roll'/>
					<property type='angle' bytes='2' path='/sensors/ahrs/orientation/magnetic-heading'/>
					<property type='temperature' bytes='2' path='/sensors/ahrs/internal-temperature'/>
					<property type='float' bytes='2' path='/sensors/slip-skid/slip-skid'/>
					<property type='pressure' bytes='4' path='/sensors/pressure/static'/>
					<property type='speed' bytes='4' path='/sensors/airspeed/ias'/>
					<property type='temperature' bytes='2' path='/sensors/air-temperature/static'/>
					<property type='integer' bytes='4' path='/sensors/gps/read-errors'/>
					<property type='integer' bytes='1' path='/sensors/gps/fix-quality'/>
					<property type='integer' bytes='1' path='/sensors/gps/type-of-fix'/>
					<property type='angle' bytes='8' path='/sensors/gps/latitude'/>
					<property type='angle' bytes='8' path='/sensors/gps/longitude'/>
					<property type='length' bytes='4' path='/sensors/gps/altitude-amsl'/>
					<property type='length' bytes='4' path='/sensors/gps/altitude-above-wgs84'/>
					<property type='speed' bytes='4' path='/sensors/gps/groundspeed'/>
					<property type='angle' bytes='4' path='/sensors/gps/track'/>
					<property type='integer' bytes='1' path='/sensors/gps/tracked-satellites'/>
					<bitfield>
						<property type='boolean' path='/sensors/gps/serviceable'/>
						<property type='boolean' path='/sensors/airspeed/serviceable'/>
						<property type='boolean' path='/sensors/pressure/serviceable'/>
						<property type='boolean' path='/sensors/ahrs/serviceable'/>
						<property type='boolean' path='/sensors/pwm/serviceable'/>
					</bitfield>
				</signature>
			</packet>
			<packet magic='e4:40' send-every='10' send-offset='0'>
				<signature random-bytes='2' signature-bytes='2' key='44:55:66:77'>
					<property type='float' bytes='2' path='/sensors/gps/hdop'/>
					<property type='float' bytes='2' path='/sensors/gps/vdop'/>
					<property type='length' bytes='2' path='/sensors/gps/lateral-accuracy'/>
					<property type='length' bytes='2' path='/sensors/gps/vertical-accuracy'/>
					<property type='time' bytes='4' path='/sensors/gps/update-timestamp'/>
					<property type='time' bytes='4' path='/sensors/gps/epoch-time'/>
					<property type='integer' bytes='2' path='/link/local/failsafes'/>
					<bitfield>
						<property type='boolean' path='/link/local/valid'/>
					</bitfield>
				</signature>
			</packet>
		</protocol>
	</module>
	<module name='io/link' instance='input'>
		<settings>
			<setting name='failsafe-after' value='500 ms'/>
			<setting name='reacquire-after' value='150 ms'/>
		</settings>
		<properties>
			<property name='input' path='/link/data/from-groundstation'/>
			<property name='link-valid' path='/link/local/valid'/>
			<property name='failsafes' path='/link/local/failsafes'/>
			<property name='reacquires' path='/link/local/reacquires'/>
			<property name='error-bytes' path='/link/local/error-bytes'/>
			<property name='valid-bytes' path='/link/local/valid-bytes'/>
			<property name='valid-packets' path='/link/local/valid-packets'/>
		</properties>
		<protocol>
			<packet magic='e4:40'>
				<signature random-bytes='2' signature-bytes='4' key='88:99:aa:bb'>
					<property type='float' bytes='2' path='/input/main/axis/4'/>
				</signature>
			</packet>
		</protocol>
	</module>
</xefis-include>

